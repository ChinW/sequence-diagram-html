<html>
	<head>
		<title>Sequence diagram demo (conversion from text)</title>
		<link rel="stylesheet" href="style/sequence-diagram.css">
		<link rel="stylesheet" href="style/sequence-diagram-columns.css">
		<style>
			body {
				font-family: "Trebuchet MS", sans-serif;
				background-color: #F8F4F0;
				margin: 0;
				padding-left: 30%;
			}
			
			#test-input {
				position: fixed;
				top: 0;
				left: 0;
				bottom: 40px;
				width: 30%;
				white-space: pre;
			}
			
			#export-button {
				position: fixed;
				bottom: 0;
				left: 0;
				width: 30%;
				height: 40px;
			}
		</style>
	</head>
	<body>
		<script src="style/sequence-diagram-text.js"></script>
		<textarea id="test-input">
Alice, Bob, Carol, Dani

// initial conversation
Alice --> Carol: says hello
Carol: (Carol is a nice person)
Dani: enters

// second conversation
Bob: Alice and Bob's private conversation
    Alice -> Bob: talks
    Alice &lt;- Bob: replies
    Bob: distraction
        Alice -> Bob: talks
        Alice &lt;- Bob: replies

    // final conclusions
    Dani: leaves
    Bob -> Alice: conclusions
</textarea>
		<div id="test-output"></div>
		<input type="button" id="export-button" value="Export HTML">
		<script>
			var lastText = null
			setInterval(function () {
				var eInput = document.getElementById('test-input');
				var eOutput = document.getElementById('test-output');
				var text = eInput.value;
				if (lastText !== text) {
					lastText = text;
					var html = sequenceDiagram.textToHtml(text);
					console.log(html);
					eOutput.innerHTML = html;
				}
			}, 100);
			
			document.getElementById('export-button').onclick = function () {
				var eInput = document.getElementById('test-input');
				var text = eInput.value;
				var html = sequenceDiagram.textToHtml(text);
				window.open('data:text/plain,' + encodeURIComponent(html));
			};
		</script>
	</body>
</html>